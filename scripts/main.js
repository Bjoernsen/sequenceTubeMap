!function(){function e(t,n,r){function o(i,d){if(!n[i]){if(!t[i]){var s="function"==typeof require&&require;if(!d&&s)return s(i,!0);if(a)return a(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[i]={exports:{}};t[i][0].call(l.exports,function(e){return o(t[i][1][e]||e)},l,l.exports,e,t,n,r)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}return e}()({1:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(){var e=document.createElement("option");return e.value="none",e.innerHTML="None",e}function a(){var e=void 0,t=void 0;x?(e=E.xgFile,t=!0):(e=$("#xgFileSelect").val(),t=!1),$.ajax({type:"POST",url:y+"/getPathNames",crossDomain:!0,data:{xgFile:e,isUploadedFile:t},dataType:"json",success:function(e){var t=(document.getElementById("pathNameSelect"),document.createElement("option"));t.value="none",t.innerHTML="None",$("#pathNameSelect").append(t),e.pathNames.forEach(function(e){document.createElement("option");$("#pathNameSelect").append('<option value="'+e+'" selected>'+e+"</option>")})},error:function(e,t,n){console.log("POST failed.")}})}function i(){d3.select("#svg").selectAll("*").remove(),d3.select("#svg").attr("width",100);var e=$("#tubeMapSVG").width();return $("#legendDiv").html(""),document.getElementById("loader").setAttribute("style","left:"+(e/2-25)+"px"),d()}function d(){var e=document.getElementById("position").value,t=document.getElementById("distance").value,n=0!==document.getElementById("unitSelect").selectedIndex,r=void 0,o=void 0,a=void 0;x?(r=E.xgFile,o=E.gbwtFile,a=E.gamFile):(r=$("#xgFileSelect").val(),o=$("#gbwtFileSelect").val(),a=$("#gamFileSelect").val());var i=$("#pathNameSelect").val(),d=void 0===E.xgFile?"mounted":"upload";return v.forEach(function(e){e.name===$("#dataSourceSelect").val()&&(r=e.xgFile,o=e.gbwtFile,a=e.gamFile,i=e.anchorTrackName,d="default")}),$.ajax({type:"POST",url:y+"/chr22_v4",crossDomain:!0,data:{nodeID:e,distance:t,byNode:n,xgFile:r,gbwtFile:o,gamFile:a,anchorTrackName:i,dataPath:d},dataType:"json",success:function(e){if(void 0===e.graph)document.getElementById("inputError").innerText=e.error,document.getElementById("loader").style.display="none";else{document.getElementById("inputError").innerText="";var t=g.vgExtractNodes(e.graph),n=g.vgExtractTracks(e.graph);s(t,n,g.vgExtractReads(t,n,e.gam))}},error:function(e,t,n){console.log("POST failed.")}})}function s(e,t,n){g.create({svgID:"#svg",nodes:e,tracks:t,reads:n}),document.getElementById("loader").style.display="none";var r=performance.now();console.log("Took "+(r-w)+" milliseconds.")}function c(){for(var e=document.getElementById("xgFileSelect");e.hasChildNodes();)e.removeChild(e.lastChild);var t=document.createElement("option");t.value="none",t.innerHTML="None",e.appendChild(t);for(var n=document.getElementById("gbwtFileSelect");n.hasChildNodes();)n.removeChild(n.lastChild);var r=document.createElement("option");r.value="none",r.innerHTML="None",n.appendChild(r);for(var o=document.getElementById("gamFileSelect");o.hasChildNodes();)o.removeChild(o.lastChild);var a=document.createElement("option");a.value="none",a.innerHTML="None",o.appendChild(a)}function l(){x||$.ajax({type:"POST",url:y+"/getFilenames",crossDomain:!0,success:function(e){var t=document.getElementById("xgFileSelect"),n=t.options[t.selectedIndex].value,r=document.getElementById("gbwtFileSelect"),o=r.options[r.selectedIndex].value,a=document.getElementById("gamFileSelect"),i=a.options[a.selectedIndex].value;c(),e.xgFiles.forEach(function(e){var r=document.createElement("option");r.value=e,r.innerHTML=e,r.value===n&&(r.selected="true"),t.appendChild(r)}),e.gbwtFiles.forEach(function(e){var t=document.createElement("option");t.value=e,t.innerHTML=e,t.value===o&&(t.selected="true"),r.appendChild(t)}),e.gamIndices.forEach(function(e){var t=document.createElement("option");t.value=e,t.innerHTML=e,t.value===i&&(t.selected="true"),a.appendChild(t)})},error:function(e,t,n){console.log("POST failed.")}})}function h(){var e=new WebSocket(y.replace(/^http/,"ws"));e.onmessage=function(e){console.log("Message received"),l()},e.onclose=function(e){setTimeout(h,1e3)},e.onerror=function(t){e.close()}}var u=e("merge-json"),p=r(u),f=e("./tubemap"),g=r(f),m=e("../../config.default.json");try{m=p.merge(m,e("../../config.json"))}catch(e){}var y=m.BACKEND_URL||"http://"+window.location.host,v=m.DATA_SOURCES,w=0,x="select"!==document.getElementById("xgFileSelect").nodeName.toLowerCase(),E={};$("#dataSourceSelect").change(function(){$("#distance").prop("value","100"),$("#unitSelect").prop("value","1"),"custom"===$("#dataSourceSelect").val()?($("#reloadButton").prop("disabled",!1),$("#xgFileSelect").prop("disabled",!1),$("#gbwtFileSelect").prop("disabled",!1),$("#gamFileSelect").prop("disabled",!1),$("#pathNameSelect").prop("disabled",!1),$("#position").prop("value","1")):($("#reloadButton").prop("disabled",!0),$("#xgFileSelect").prop("disabled",!0),$("#gbwtFileSelect").prop("disabled",!0),$("#gamFileSelect").prop("disabled",!0),$("#pathNameSelect").prop("disabled",!0),v.forEach(function(e){e.name===$("#dataSourceSelect").val()&&$("#position").prop("value",e.defaultPosition)}))}),$("#xgFileSelect").change(function(){if($("#pathNameSelect").empty(),!x)return void("none"===$("#xgFileSelect").val()?$("#pathNameSelect").append(o()):a());var e=document.getElementById("xgFileSelect").files[0];if(void 0===e)$("#pathNameSelect").append(o()),delete E.xgFile;else{var t=new FormData;t.append("xgFile",e);var n=new XMLHttpRequest;n.responseType="json",n.onreadystatechange=function(){4===n.readyState&&200===n.status&&(E.xgFile=n.response.path,a())},n.open("POST",y+"/xgFileSubmission",!0),n.send(t)}}),$("#gbwtFileSelect").change(function(){if(x){var e=document.getElementById("gbwtFileSelect").files[0];if(void 0===e)delete E.gbwtFile;else{var t=new FormData;t.append("gbwtFile",e);var n=new XMLHttpRequest;n.responseType="json",n.onreadystatechange=function(){4===n.readyState&&200===n.status&&(E.gbwtFile=n.response.path)},n.open("POST",y+"/gbwtFileSubmission",!0),n.send(t)}}}),$("#gamFileSelect").change(function(){if(x){var e=document.getElementById("gamFileSelect").files[0];if(void 0===e)delete E.gamFile;else{var t=new FormData;t.append("gamFile",e);var n=new XMLHttpRequest;n.responseType="json",n.onreadystatechange=function(){4===n.readyState&&200===n.status&&(E.gamFile=n.response.path,console.log(E))},n.open("POST",y+"/gamFileSubmission",!0),n.send(t)}}}),document.getElementById("reloadButton").onclick=function(){l()},document.getElementById("goButton").onclick=function(){w=performance.now(),i()},document.getElementById("goLeftButton").onclick=function(){var e=Number(document.getElementById("position").value),t=Number(document.getElementById("distance").value);document.getElementById("position").value=Math.max(e-t,0),i()};document.getElementById("zoomInButton").onclick=function(){g.zoomBy(2)},document.getElementById("zoomOutButton").onclick=function(){g.zoomBy(.5)},document.getElementById("goRightButton").onclick=function(){var e=Number(document.getElementById("position").value),t=Number(document.getElementById("distance").value);document.getElementById("position").value=e+t,i()},document.getElementById("redundantNodesCheckbox").onclick=function(){!0===document.getElementById("redundantNodesCheckbox").checked?g.setMergeNodesFlag(!0):g.setMergeNodesFlag(!1)},document.getElementById("compressedViewCheckbox").onclick=function(){!0===document.getElementById("compressedViewCheckbox").checked?g.setNodeWidthOption(1):g.setNodeWidthOption(0)},document.getElementById("showReadsCheckbox").onclick=function(){!0===document.getElementById("showReadsCheckbox").checked?g.setShowReadsFlag(!0):g.setShowReadsFlag(!1)},document.getElementById("softClipsCheckbox").onclick=function(){!0===document.getElementById("softClipsCheckbox").checked?g.setSoftClipsFlag(!0):g.setSoftClipsFlag(!1)};for(var b=document.getElementsByClassName("colorRadio"),F=0;F<b.length;F+=1)!function(e){var t=void 0;switch(b[e].name){case"colorsHaplo":t="haplotypeColors";break;case"colorsFwReads":t="forwardReadColors";break;case"colorsRevReads":t="reverseReadColors";break;default:console.log("Could not find track type in color set assignment")}var n=void 0;switch(b[e].value){case"option1":n="plainColors";break;case"option2":n="greys";break;case"option3":n="reds";break;case"option4":n="blues";break;case"option5":n="lightColors";break;default:console.log("Could not find color type in color set assignment")}b[e].onclick=function(){console.log(this),g.setColorSet(t,n)}}(F);document.getElementById("downloadButton").onclick=function(){var e=document.getElementById("svg"),t=(new XMLSerializer).serializeToString(e),n=new Blob([t],{type:"image/svg+xml;charset=utf-8"}),r=URL.createObjectURL(n),o=document.createElement("a");o.href=r,o.download="graph.svg",document.body.appendChild(o),o.click(),document.body.removeChild(o)},window.onload=function(){var e=document.getElementById("dataSourceSelect");v.forEach(function(t){var n=document.createElement("option");n.value=t.name,n.innerHTML=t.name,e.appendChild(n)});var t=document.createElement("option");t.value="custom",t.innerHTML="custom",e.appendChild(t),document.getElementById("goButton").click(),l(),document.getElementById("redundantNodesCheckbox").checked=!0,document.getElementById("compressedViewCheckbox").checked=!1,document.getElementById("showReadsCheckbox").checked=!0,document.getElementById("softClipsCheckbox").checked=!0,document.getElementById("colorsHaplo2").checked=!0,document.getElementById("colorsFwReads3").checked=!0,document.getElementById("colorsRevReads4").checked=!0,h()}},{"../../config.default.json":3,"../../config.json":4,"./tubemap":2,"merge-json":5}],2:[function(e,t,n){"use strict";function r(e){ot=e.svgID,at=d3.select(e.svgID),dt=JSON.parse(JSON.stringify(e.nodes)),st=JSON.parse(JSON.stringify(e.tracks)),ct=e.reads||null,Mt=e.bed||null,Et.clickableNodesFlag=e.clickableNodes||!1,Et.hideLegendFlag=e.hideLegend||!1;p();Et.hideLegendFlag||ke()}function o(e){st.unshift(st[e]),st.splice(e+1,1),a(0)}function a(e){var t=void 0,n=void 0,r=[],o=void 0,a=void 0;for(o=st[e].sequence,t=0;t<o.length;t+=1)"-"===o[t].charAt(0)&&(a=o[t].substr(1),(-1===o.indexOf(a)||o.indexOf(a)>t)&&r.push(o[t].substr(1)));for(t=0;t<st.length;t+=1)for(o=st[t].sequence,n=0;n<o.length;n+=1)"-"!==o[n].charAt(0)?-1!==r.indexOf(o[n])&&(o[n]="-"+o[n]):-1!==r.indexOf(o[n].substr(1))&&(o[n]=o[n].substr(1));dt.forEach(function(e){-1!==r.indexOf(e.name)&&(e.seq=e.seq.split("").reverse().join(""))})}function i(e){for(var t=0;t<st.length&&st[t].id!==e;)t+=1;t<st.length&&(st[t].hasOwnProperty("hidden")?st[t].hidden=!st[t].hidden:st[t].hidden=!0),p()}function d(){Et.showExonsFlag=!Et.showExonsFlag,p()}function s(e){Et.mergeNodesFlag!==e&&(Et.mergeNodesFlag=e,at=d3.select(ot),p())}function c(e){Et.showSoftClips!==e&&(Et.showSoftClips=e,at=d3.select(ot),p())}function l(e){Et.showReads!==e&&(Et.showReads=e,at=d3.select(ot),p())}function h(e,t){Et[e]=t;p();Et.hideLegendFlag||ke()}function u(e){0!==e&&1!==e&&2!==e||Et.nodeWidthOption!==e&&(Et.nodeWidthOption=e,void 0!==at&&(at=d3.select(ot),p()))}function p(){bt=[],Ft=[],kt=[],St=[],qt=[],yt=[],vt=[],wt=[],Nt=0,Ot=0,It=0,Ct=void 0,at=d3.select(ot),at.selectAll("*").remove(),lt=JSON.parse(JSON.stringify(dt)),ht=JSON.parse(JSON.stringify(st)),ut=JSON.parse(JSON.stringify(ct)),re();for(var e=ht.length-1;e>=0;e-=1)ht[e].hasOwnProperty("type")||(ht[e].type="haplo"),ht[e].hasOwnProperty("hidden")&&!0===ht[e].hidden&&ht.splice(e,1),ht[e].hasOwnProperty("indexOfFirstBase")&&(Ct=ht[e].name);gt=M(),q(ht),ut&&Et.showReads&&q(ut),Le(),ut&&Et.mergeNodesFlag&&(L(),D(),ut&&Et.showReads&&k(),De(),gt=M(),Le(),q(ht),ut&&Et.showReads&&q(ut)),pt=lt.length,ft=ht.length,L(),U(),Je&&console.log(pt+" nodes."),D(),xt=A(),te(),z(),!0===Et.showExonsFlag&&null!==Mt&&ee(),W(),ut&&Et.showReads&&(f(),k(),q(ut),m(),ht=ht.concat(ut)),ce(),console.log("Tracks:"),console.log(ht),console.log("Nodes:"),console.log(lt),console.log("Lane assignment:"),console.log(yt),O(),I(),Ee(),we(bt),be(),pe(kt,St),we(qt),we(bt,"read"),be("read");var t=N(lt);return fe(t),pe(kt,St,"read"),0===Et.nodeWidthOption&&ge(t),void 0!==Ct&&me(),0===Et.nodeWidthOption&&Te(),Je&&(console.log("number of tracks: "+ft),console.log("number of nodes: "+pt)),ht}function f(){mt=[];for(var e=0;e<=xt;e+=1)mt[e]=[];var t=new Map;lt.forEach(function(e){e.hasOwnProperty("order")&&e.hasOwnProperty("y")&&(t.has(e.order)?t.set(e.order,Math.max(e.y+e.contentHeight,t.get(e.order))):t.set(e.order,e.y+e.contentHeight))}),lt.forEach(function(e,n){e.hasOwnProperty("order")&&!e.hasOwnProperty("y")&&(console.log("adding to "+e.name),e.y=t.get(e.order)+25,e.contentHeight=0,mt[e.order].push(n))})}function g(){lt.forEach(function(e){e.incomingReads=[],e.outgoingReads=[],e.internalReads=[]}),ut.forEach(function(e,t){e.width=7,1===e.path.length?lt[e.path[0].node].internalReads.push(t):e.path.forEach(function(n,r){0===r?lt[e.path[0].node].outgoingReads.push([t,r]):null!==e.path[r].node&&lt[e.path[r].node].incomingReads.push([t,r])})})}function m(){F(),g();var e=lt.slice();e.sort(K),e.forEach(function(e){e.incomingReads.sort(x);var t=e.y+e.contentHeight,n=new Map;e.incomingReads.forEach(function(r){ut[r[0]].path[r[1]].y=t,y(n,ut[r[0]],r[1],t,e),t+=7});var r=t;e.outgoingReads.sort(w);var o=new Map;t=e.y+e.contentHeight,e.outgoingReads.forEach(function(a){ut[a[0]].path[a[1]].y=t,o.set(t,ut[a[0]].firstNodeOffset),!n.has(t)||n.get(t)+1<ut[a[0]].firstNodeOffset?(t+=7,r=Math.max(r,t)):(n.set(t,0),e.incomingReads.forEach(function(r){var o=ut[r[0]],a=o.path[r[1]];a.y>=t&&(a.y+=7,y(n,o,r[1],a.y,e))}),t+=7,r+=7)}),e.internalReads.sort(E),e.internalReads.forEach(function(a){var i=ut[a];for(t=e.y+e.contentHeight;i.firstNodeOffset<n.get(t)+2||i.finalNodeCoverLength>o.get(t)-3;)t+=7;i.path[0].y=t,n.set(t,i.finalNodeCoverLength),r=Math.max(r,t)});var a=r-e.y-e.contentHeight;e.contentHeight+=a,X(e,a)});var t=b(),n=[];ut.forEach(function(e,t){e.path.forEach(function(e,r){e.hasOwnProperty("y")||n.push({readIndex:t,pathIndex:r,previousY:ut[t].path[r-1].y})})}),n.sort(v),n.forEach(function(e){var n=ut[e.readIndex].path[e.pathIndex];n.y=t[n.order],t[n.order]+=ut[e.readIndex].width}),console.log("Reads:"),console.log(ut)}function y(e,t,n,r,o){n===t.path.length-1?e.set(r,t.finalNodeCoverLength):e.set(r,o.sequenceLength)}function v(e,t){var n=ut[e.readIndex].path[e.pathIndex],r=ut[t.readIndex].path[t.pathIndex];return n.order===r.order?e.previousY-t.previousY:n.order-r.order}function w(e,t){for(var n=e[1],r=t[1],o=lt[ut[e[0]].path[n].node],a=lt[ut[t[0]].path[r].node];null!==o&&null!==a&&o===a;){if(n<ut[e[0]].path.length-1){for(n+=1;null===ut[e[0]].path[n].node;)n+=1;o=lt[ut[e[0]].path[n].node]}else o=null;if(r<ut[t[0]].path.length-1){for(r+=1;null===ut[t[0]].path[r].node;)r+=1;a=lt[ut[t[0]].path[r].node]}else a=null}if(null!==o)return null!==a?K(o,a):1;if(null!==a)return-1;var i=ut[e[0]].firstNodeOffset-ut[t[0]].firstNodeOffset;return 0!==i?i:ut[e[0]].finalNodeCoverLength-ut[t[0]].finalNodeCoverLength}function x(e,t){var n=ut[e[0]].path[e[1]-1],r=ut[t[0]].path[t[1]-1];return n.hasOwnProperty("y")?r.hasOwnProperty("y")?n.y-r.y:-1:r.hasOwnProperty("y")?1:x([e[0],e[1]-1],[t[0],t[1]-1])}function E(e,t){var n=ut[e],r=ut[t];return n.firstNodeOffset<r.firstNodeOffset?-1:n.firstNodeOffset>r.firstNodeOffset?1:n.finalNodeCoverLength<r.finalNodeCoverLength?-1:n.finalNodeCoverLength>r.finalNodeCoverLength?1:0}function b(){for(var e=[],t=0;t<=xt;t+=1)e.push(0);return lt.forEach(function(t){e[t.order]=Math.max(e[t.order],t.y+t.contentHeight+20)}),ht.forEach(function(t){t.path.forEach(function(n){e[n.order]=Math.max(e[n.order],n.y+t.width)})}),e}function F(){var e=void 0,t=void 0,n=void 0,r=void 0,o=void 0,a=function(e){return((e=+e)||1/e)>=0};ut.forEach(function(i){e=Math.abs(i.indexSequence[0]),t=a(i.indexSequence[0]),n=lt[e],i.path=[],i.path.push({order:n.order,isForward:t,node:e});for(var d=1;d<i.sequence.length;d+=1)if(r=n,o=t,e=Math.abs(i.indexSequence[d]),t=a(i.indexSequence[d]),n=lt[e],n.order>r.order){o||i.path.push({order:r.order,isForward:!0,node:null});for(var s=r.order+1;s<n.order;s+=1)i.path.push({order:s,isForward:!0,node:null});t?i.path.push({order:n.order,isForward:!0,node:e}):(i.path.push({order:n.order,isForward:!0,node:null}),i.path.push({order:n.order,isForward:!1,node:e}))}else if(n.order<r.order){o&&i.path.push({order:r.order,isForward:!1,node:null});for(var c=r.order-1;c>n.order;c-=1)i.path.push({order:c,isForward:!1,node:null});t?(i.path.push({order:n.order,isForward:!1,node:null}),i.path.push({order:n.order,isForward:!0,node:e})):i.path.push({order:n.order,isForward:!1,node:e})}else t!==o?i.path.push({order:n.order,isForward:t,node:e}):(i.path.push({order:n.order,isForward:!t,node:null}),i.path.push({order:n.order,isForward:t,node:e}))})}function k(){ut.forEach(function(e){for(var t=0;t<e.sequence.length&&"-"===e.sequence[t].charAt(0);)t+=1;if(t===e.sequence.length){e.is_reverse=!0,e.sequence=e.sequence.reverse();for(var n=0;n<e.sequence.length;n+=1)e.sequence[n]=e.sequence[n].substr(1);e.sequenceNew=e.sequenceNew.reverse();for(var r=0;r<e.sequenceNew.length;r+=1)!function(t){e.sequenceNew[t].nodeName=e.sequenceNew[t].nodeName.substr(1);var n=lt[gt.get(e.sequenceNew[t].nodeName)].width;e.sequenceNew[t].mismatches.forEach(function(e){"insertion"===e.type?(e.pos=n-e.pos,e.seq=S(e.seq)):"deletion"===e.type?e.pos=n-e.pos-e.length:"substitution"===e.type&&(e.pos=n-e.pos-e.seq.length,e.seq=S(e.seq)),e.hasOwnProperty("seq")&&(e.seq=e.seq.split("").reverse().join(""))})}(r);var o=e.firstNodeOffset,a=lt[gt.get(e.sequence[0])].sequenceLength;e.firstNodeOffset=a-e.finalNodeCoverLength,a=lt[gt.get(e.sequence[e.sequence.length-1])].sequenceLength,e.finalNodeCoverLength=a-o}})}function S(e){for(var t="",n=e.length-1;n>=0;n-=1)switch(e.charAt(n)){case"A":t+="T";break;case"T":t+="A";break;case"C":t+="G";break;case"G":t+="C";break;default:t+="N"}return t}function q(e){e.forEach(function(e){e.indexSequence=[],e.sequence.forEach(function(t){"-"===t.charAt(0)?e.indexSequence.push(-gt.get(t.substr(1))):e.indexSequence.push(gt.get(t))})})}function N(e){var t=e.slice(0),n=void 0;for(n=t.length-1;n>=0;n-=1)t[n].hasOwnProperty("x")||t.splice(n,1);return t}function O(){It=-99,Ot=99,Nt=-99,lt.forEach(function(e){e.hasOwnProperty("x")&&(It=Math.max(It,e.x+20+e.pixelWidth)),e.hasOwnProperty("y")&&(Ot=Math.min(Ot,e.y-10),Nt=Math.max(Nt,e.y+e.contentHeight+10))}),ht.forEach(function(e){e.path.forEach(function(t){Nt=Math.max(Nt,t.y+e.width),Ot=Math.min(Ot,t.y)})})}function I(){function e(){var e=d3.event.transform;e.y=(25-Ot)*e.k,at.attr("transform",e);var t=d3.select(ot);t.attr("height",(Nt-Ot+50)*d3.event.transform.k),t.attr("width",document.getElementById("tubeMapSVG").clientWidth)}at.attr("height",Nt-Ot+50),at.attr("width",$(ot).parent().width()),n.zoom=it=d3.zoom().scaleExtent([$(ot).parent().width()/It,8]).translateExtent([[-1,Ot-25],[It+2,Nt+25]]).on("zoom",e),at=at.call(it).on("dblclick.zoom",null).append("g"),d3.select(ot).call(it.transform,d3.zoomIdentity.translate(0,25-Ot))}function C(e){var t=$(ot).parent().width()/It,n=document.getElementById(ot.substring(1)).parentElement.clientWidth,r=d3.zoomTransform(d3.select(ot).node()),o=Math.min(8,Math.max(r.k*e,t)),a=n/2-(n/2-r.x)*o/r.k;a=Math.min(a,1*o),a=Math.max(a,n-(It+2)*o);var i=(25-Ot)*o;d3.select(ot).transition().duration(750).call(it.transform,d3.zoomIdentity.translate(a,i).scale(o))}function M(){return gt=new Map,lt.forEach(function(e,t){gt.set(e.name,t)}),gt}function L(){var e=void 0,t=void 0;lt.forEach(function(e){e.successors=[],e.predecessors=[]}),ht.forEach(function(n){for(var r=0;r<n.indexSequence.length-1;r+=1)e=Math.abs(n.indexSequence[r]),t=Math.abs(n.indexSequence[r+1]),-1===lt[e].successors.indexOf(t)&&lt[e].successors.push(t),-1===lt[t].predecessors.indexOf(e)&&lt[t].predecessors.push(e)}),ut&&Et.showReads&&ut.forEach(function(n){for(var r=0;r<n.indexSequence.length-1;r+=1)e=Math.abs(n.indexSequence[r]),t=Math.abs(n.indexSequence[r+1]),-1===lt[e].successors.indexOf(t)&&lt[e].successors.push(t),-1===lt[t].predecessors.indexOf(e)&&lt[t].predecessors.push(e)})}function B(e){var t=0,n=0,r=void 0,o=0;e.forEach(function(e){e<0?(r=lt[Math.abs(e)],r.hasOwnProperty("order")||(r.order=n),r.order<o&&(o=r.order),t=r.order,n=r.order-1):(r=lt[e],r.hasOwnProperty("order")||(r.order=t),t=r.order+1,n=r.order)}),o<0&&H(-o)}function P(e){for(var t=0,n=void 0,r=void 0,o=0,a=void 0;t<e.length&&!lt[Math.abs(e[t])].hasOwnProperty("order");)t+=1;if(t>=e.length)return null;e[t]>=0?(n=lt[e[t]].order-1,a=-1):(n=lt[-e[t]].order+1,a=1);for(var i=t-1;i>=0;i-=1)r=lt[Math.abs(e[i])],r.hasOwnProperty("order")||(r.order=n,o=Math.min(o,n),n+=a);return o<0&&H(-o),t}function D(){var e=void 0,t=void 0,n=void 0,r=void 0,o=void 0,a=0,i=void 0;i=ut&&Et.showReads?ht.concat(ut):ht,lt.forEach(function(e){delete e.order}),B(ht[0].indexSequence);for(var d=1;d<i.length;d+=1)if(Je&&console.log("generating order for track "+(d+1)),null!==(r=P(i[d].indexSequence)))for(e=T(i[d].indexSequence);r<e.length;){for(o=r,r+=1;r<e.length&&!lt[e[r]].hasOwnProperty("order");)r+=1;if(r<e.length){t=lt[e[o]].order+1;for(var s=o+1;s<r;s+=1)lt[e[s]].order=t,t+=1;if(lt[e[r]].order>lt[e[o]].order)lt[e[r]].order<t&&_(e[r],e[r-1],t);else if(i[d].indexSequence[r]>=0&&!R(e[r],e[o]))_(e[r],e[r-1],t);else if(i[d].sequence[o]<0||lt[e[o+1]].degree<2&&lt[e[r]].order<lt[e[o]].order){t=lt[e[o]].order-1;for(var c=o+1;c<r;c+=1)lt[e[c]].order=t,t-=1}}else if(i[d].sequence[o]>=0){t=lt[e[o]].order+1;for(var l=o+1;l<e.length;l+=1)n=lt[e[l]],n.hasOwnProperty("order")||(n.order=t,t+=1)}else{t=lt[e[o]].order-1;for(var h=o+1;h<e.length;h+=1)n=lt[e[h]],n.hasOwnProperty("order")||(n.order=t,a=Math.min(a,t),t-=1)}}else i.splice(d,1),ut.splice(d-ht.length,1),d-=1;a<0&&H(-a)}function R(e,t){var n=new Array(pt).fill(!1),r=[];for(r.push(e),n[e]=!0;r.length>0;){var o=r.pop();if(o===t)return!0;for(var a=0;a<lt[o].successors.length;a+=1){var i=lt[o].successors[a];n[i]||(n[i]=!0,r.push(i))}}return!1}function A(){var e=-1;return lt.forEach(function(t){t.hasOwnProperty("order")&&t.order>e&&(e=t.order)}),e}function T(e){for(var t=[],n=0;n<e.length;n+=1)e[n]>=0?t.push(e[n]):t.push(-e[n]);return t}function H(e){lt.forEach(function(t){t.hasOwnProperty("order")&&(t.order+=e)})}function _(e,t,n){var r=new Map,o=[];o.push([e,n]);for(;o.length>0;)!function(){var n=o.shift(),a=n[0],i=n[1];lt[a].hasOwnProperty("order")&&lt[a].order<i&&(!r.has(a)||r.get(a)<i)&&(r.set(a,i),lt[a].successors.forEach(function(e){lt[e].order>lt[a].order&&e!==t&&o.push([e,i+1])}),a!==e&&lt[a].predecessors.forEach(function(e){lt[e].order>a.order&&e!==t&&o.push([e,i+1])}))}();r.forEach(function(e,t){lt[t].order=e})}function U(){lt.forEach(function(e){e.tracks=[]}),ht.forEach(function(e){e.indexSequence.forEach(function(t){lt[Math.abs(t)].tracks.push(e.id)})}),lt.forEach(function(e){e.hasOwnProperty("tracks")&&(e.degree=e.tracks.length)})}function W(){var e=0,t=20,n=-1,r=lt.slice();r.sort(K);var o=j();r.forEach(function(r){r.hasOwnProperty("order")&&(r.order>n&&(n=r.order,e=t+10*o[r.order]),r.x=e,t=Math.max(t,e+40+r.pixelWidth))})}function j(){for(var e=[],t=[],n=[],r=0;r<=xt;r+=1)e.push(0),t.push(0);ht.forEach(function(n){for(var r=1;r<n.path.length;r+=1)n.path[r].order===n.path[r-1].order&&(!0===n.path[r].isForward?e[n.path[r].order]+=1:t[n.path[r].order]+=1)}),n.push(Math.max(0,e[0]-1));for(var o=1;o<=xt;o+=1)n.push(Math.max(0,e[o]-1)+Math.max(0,t[o-1]-1));return n}function z(){for(var e=void 0,t=void 0,n=void 0,r=void 0,o=void 0,a=void 0,i=[],d=function(e){return((e=+e)||1/e)>=0},s=0;s<=xt;s+=1){yt[s]=[],i[s]=[];for(var c=0;c<ft;c+=1)i[s][c]=null}ht.forEach(function(s,c){t=Math.abs(s.indexSequence[0]),n=d(s.indexSequence[0]),r=lt[t],s.path=[],s.path.push({order:r.order,lane:null,isForward:n,node:t}),Y(r.order,t,c,0,i),e=1;for(var l=1;l<s.sequence.length;l+=1)if(o=r,a=n,t=Math.abs(s.indexSequence[l]),n=d(s.indexSequence[l]),r=lt[t],r.order>o.order){a||(s.path.push({order:o.order,lane:null,isForward:!0,node:null}),Y(o.order,null,c,e,i),e+=1);for(var h=o.order+1;h<r.order;h+=1)s.path.push({order:h,lane:null,isForward:!0,node:null}),Y(h,null,c,e,i),e+=1;n?(s.path.push({order:r.order,lane:null,isForward:!0,node:t}),Y(r.order,t,c,e,i),e+=1):(s.path.push({order:r.order,lane:null,isForward:!0,node:null}),Y(r.order,null,c,e,i),e+=1,s.path.push({order:r.order,lane:null,isForward:!1,node:t}),Y(r.order,t,c,e,i),e+=1)}else if(r.order<o.order){a&&(s.path.push({order:o.order,lane:null,isForward:!1,node:null}),Y(o.order,null,c,e,i),e+=1);for(var u=o.order-1;u>r.order;u-=1)s.path.push({order:u,lane:null,isForward:!1,node:null}),Y(u,null,c,e,i),e+=1;n?(s.path.push({order:r.order,lane:null,isForward:!1,node:null}),Y(r.order,null,c,e,i),e+=1,s.path.push({order:r.order,lane:null,isForward:!0,node:t}),Y(r.order,t,c,e,i),e+=1):(s.path.push({order:r.order,lane:null,isForward:!1,node:t}),Y(r.order,t,c,e,i),e+=1)}else n!==a?(s.path.push({order:r.order,lane:null,isForward:n,node:t}),Y(r.order,t,c,e,i),e+=1):(s.path.push({order:r.order,lane:null,isForward:!n,node:null}),Y(r.order,null,c,e,i),e+=1,s.path.push({order:r.order,lane:null,isForward:n,node:t}),Y(r.order,t,c,e,i),e+=1)});for(var l=0;l<=xt;l+=1)J(yt[l],l)}function Y(e,t,n,r,o){var a=o[e][n];if(null===t)yt[e].push({type:"single",node:null,tracks:[{trackID:n,segmentID:r,compareToFromSame:a}]}),o[e][n]=yt[e][yt[e].length-1].tracks[0];else{for(var i=0;i<yt[e].length;i+=1)if(yt[e][i].node===t)return yt[e][i].type="multiple",yt[e][i].tracks.push({trackID:n,segmentID:r,compareToFromSame:a}),void(o[e][n]=yt[e][i].tracks[yt[e][i].tracks.length-1]);yt[e].push({type:"single",node:t,tracks:[{trackID:n,segmentID:r,compareToFromSame:a}]}),o[e][n]=yt[e][yt[e].length-1].tracks[0]}}function Q(e,t){var n=void 0;e.forEach(function(e){e.idealLane=0,e.tracks.forEach(function(r){if(0===r.segmentID)r.idealLane=r.trackID,r.idealY=null;else if(ht[r.trackID].path[r.segmentID-1].order===t-1)r.idealLane=ht[r.trackID].path[r.segmentID-1].lane,r.idealY=ht[r.trackID].path[r.segmentID-1].y;else if(r.segmentID<ht[r.trackID].path.length-1&&ht[r.trackID].path[r.segmentID+1].order===t-1)r.idealLane=ht[r.trackID].path[r.segmentID+1].lane,r.idealY=ht[r.trackID].path[r.segmentID+1].y;else{for(n=r.segmentID-1;n>=0&&ht[r.trackID].path[n].order!==t-1;)n-=1;n<0?(r.idealLane=r.trackID,r.idealY=null):(r.idealLane=ht[r.trackID].path[n].lane,r.idealY=ht[r.trackID].path[n].y)}e.idealLane+=r.idealLane}),e.idealLane/=e.tracks.length})}function J(e,t){var n=0,r=new Set,o=20,a=!1,i=-1;Q(e,t),e.sort(Z),e.forEach(function(e){null!==e.node?(lt[e.node].topLane=n,a&&(o-=10),lt[e.node].y=o,lt[e.node].contentHeight=0,a=!1):(a?o-=25:o>20&&(o-=10),a=!0),e.tracks.sort(Z),e.tracks.forEach(function(t){t.lane=n,t.trackID===i&&null===e.node&&a&&(o+=10),ht[t.trackID].path[t.segmentID].lane=n,ht[t.trackID].path[t.segmentID].y=o,null!==t.idealY&&r.add(t.idealY-o),n+=1,o+=ht[t.trackID].width,null!==e.node&&(lt[e.node].contentHeight+=ht[t.trackID].width),i=t.trackID}),o+=25}),V(e,r)}function V(e,t){var n=0,r=Number.MAX_SAFE_INTEGER;t.forEach(function(t){G(e,t)<r&&(r=G(e,t),n=t)}),e.forEach(function(e){null!==e.node&&(lt[e.node].y+=n),e.tracks.forEach(function(e){ht[e.trackID].path[e.segmentID].y+=n})})}function X(e,t){e.hasOwnProperty("order")&&(yt[e.order].forEach(function(n){if(null!==n.node){var r=lt[n.node];r!==e&&r.y>e.y&&(r.y+=t,n.tracks.forEach(function(e){ht[e.trackID].path[e.segmentID].y+=t}))}else n.tracks.forEach(function(n){ht[n.trackID].path[n.segmentID].y>=e.y&&(ht[n.trackID].path[n.segmentID].y+=t)})}),mt[e.order].length>0&&mt[e.order].forEach(function(n){lt[n]!==e&&lt[n].y>e.y&&(lt[n].y+=t)}))}function G(e,t){var n=0;return e.forEach(function(e){e.tracks.forEach(function(e){null!==e.idealY&&"read"!==ht[e.trackID].type&&(n+=Math.abs(e.idealY-t-ht[e.trackID].path[e.segmentID].y)*ht[e.trackID].width)})}),n}function Z(e,t){return e.hasOwnProperty("idealLane")?t.hasOwnProperty("idealLane")?e.idealLane<t.idealLane?-1:e.idealLane>t.idealLane?1:0:-1:t.hasOwnProperty("idealLane")?1:0}function K(e,t){if(null===e)return null===t?0:-1;if(null===t)return 1;if(e.hasOwnProperty("order")){if(t.hasOwnProperty("order")){if(e.order<t.order)return-1;if(e.order>t.order)return 1;if(e.hasOwnProperty("y")&&t.hasOwnProperty("y")){if(e.y<t.y)return-1;if(e.y>t.y)return 1}return 0}return-1}return t.hasOwnProperty("order")?1:0}function ee(){var e=void 0,t=void 0,n={};Mt.forEach(function(r){for(var o=0;o<ft&&ht[o].name!==r.track;)o+=1;o<ft&&(e=0,ht[o].path.forEach(function(o){null!==o.node&&(n={},t=lt[o.node].hasOwnProperty("sequenceLength")?e+lt[o.node].sequenceLength-1:e+lt[o.node].width-1,e>=r.start&&e<=r.end&&(n.start=0),e<r.start&&t>=r.start&&(n.start=r.start-e),t<=r.end&&t>=r.start&&(n.end=t-e,t<r.end&&(n.continue=!0)),t>r.end&&e<=r.end&&(n.end=r.end-e),n.hasOwnProperty("start")&&(n.type=r.type,n.name=r.name,o.hasOwnProperty("features")||(o.features=[]),o.features.push(n)),e=t+1)}))})}function te(){var e=!0;ht.forEach(function(t){t.hasOwnProperty("freq")?t.width=Math.round(4*(Math.log(t.freq)+1)):(t.width=15,t.hasOwnProperty("type")&&"read"===t.type&&(t.width=4)),4!==t.width&&(e=!1)}),e&&ht.forEach(function(e){e.hasOwnProperty("freq")&&(e.width=15)})}function ne(e){Et.colorScheme=e,at=d3.select(ot);p();Et.hideLegendFlag||ke()}function re(){et=oe(Et.haplotypeColors),tt=oe(Et.forwardReadColors),nt=oe(Et.reverseReadColors),rt=oe(Et.exonColors)}function oe(e){switch(e){case"plainColors":return Ze;case"reds":return Ge;case"blues":return Xe;case"greys":return Ve;case"lightColors":return Ke;default:return Ve}}function ae(e,t){void 0===t&&(t="plain");return e.hasOwnProperty("type")&&"read"===e.type?e.hasOwnProperty("is_reverse")&&!0===e.is_reverse?nt[e.id%nt.length]:tt[e.id%tt.length]:!1===Et.showExonsFlag||"plain"!==t?et[e.id%et.length]:rt[e.id%rt.length]}function ie(e){var t=lt[e.path[0].node];return e.path[0].isForward?se(t,e.firstNodeOffset):se(t,t.sequenceLength-e.firstNodeOffset)}function de(e){var t=lt[e.path[e.path.length-1].node];return e.path[e.path.length-1].isForward?se(t,e.finalNodeCoverLength):se(t,t.sequenceLength-e.finalNodeCoverLength)}function se(e,t){if(t>e.sequenceLength)return null;var n=e.x-4,r=e.x+e.pixelWidth+4;return n+t/e.sequenceLength*(r-n)}function ce(){for(var e=void 0,t=void 0,n=void 0,r=void 0,o=void 0,a=void 0,i=void 0,d=void 0,s=0;s<=xt;s+=1)vt.push(0),wt.push(0);var c=[],l=[];lt.forEach(function(e){e.hasOwnProperty("order")&&(c[e.order]=e.x,void 0===l[e.order]?l[e.order]=e.x+e.pixelWidth:l[e.order]=Math.max(l[e.order],e.x+e.pixelWidth))}),ht.forEach(function(s){a="plain",o=ae(s,a),n=s.path[0].y,e="read"!==s.type?"-"===s.sequence[0].charAt(0)?l[s.path[0].order]+20:c[s.path[0].order]-20:ie(s);for(var h=0;h<s.path.length;h+=1)s.path[h].y===n?s.path[h].hasOwnProperty("features")&&(d=h>0&&s.path[h-1].order===s.path[h].order,i=le(s.path[h],c[s.path[h].order],l[s.path[h].order],a,s,e,n,o,d),a=i.highlight,e=i.xStart):(t=s.path[h-1].isForward?l[s.path[h-1].order]:c[s.path[h-1].order],t!==e&&(o=ae(s,a),bt.push({xStart:Math.min(e,t),yStart:n,xEnd:Math.max(e,t),yEnd:n+s.width-1,color:o,id:s.id,type:s.type})),s.path[h].order-1===s.path[h-1].order?(e=t,t=c[s.path[h].order],r=s.path[h].y,o=ae(s,a),Ft.push({xStart:e,yStart:n,xEnd:t+1,yEnd:r,width:s.width,color:o,laneChange:Math.abs(s.path[h].lane-s.path[h-1].lane),id:s.id,type:s.type}),e=t,n=r):s.path[h].order+1===s.path[h-1].order?(e=t,t=l[s.path[h].order],r=s.path[h].y,o=ae(s,a),Ft.push({xStart:e+1,yStart:n,xEnd:t,yEnd:r,width:s.width,color:o,laneChange:Math.abs(s.path[h].lane-s.path[h-1].lane),id:s.id,type:s.type}),e=t,n=r):s.path[h-1].isForward?(r=s.path[h].y,he(t,n,r,s.width,o,s.id,s.path[h].order,s.type),e=l[s.path[h].order],n=s.path[h].y):(r=s.path[h].y,
ue(t,n,r,s.width,o,s.id,s.path[h].order,s.type),e=c[s.path[h].order],n=s.path[h].y),s.path[h].hasOwnProperty("features")&&(d=s.path[h-1].order===s.path[h].order,i=le(s.path[h],c[s.path[h].order],l[s.path[h].order],a,s,e,n,o,d),a=i.highlight,e=i.xStart));t="read"!==s.type?s.path[s.path.length-1].isForward?l[s.path[s.path.length-1].order]+20:c[s.path[s.path.length-1].order]-20:de(s),bt.push({xStart:Math.min(e,t),yStart:n,xEnd:Math.max(e,t),yEnd:n+s.width-1,color:o,id:s.id,type:s.type})})}function le(e,t,n,r,o,a,i,d,s){var c=void 0,l=r,h=void 0,u=void 0,p=void 0,f=void 0;return t-=8,n+=8,c=lt[e.node].hasOwnProperty("sequenceLength")?lt[e.node].sequenceLength:lt[e.node].width,e.features.sort(function(e,t){return e.start-t.start}),e.features.forEach(function(r){l!==r.type&&(h=ae(o,l),!0===e.isForward?(p=t+Math.round(r.start*(n-t+1)/c),s&&p<t+8&&(f=t+Math.round((r.end+1)*(n-t+1)/c)-1,u=ae(o,r.type),qt.push({xStart:p,yStart:i,xEnd:f,yEnd:i+o.width-1,color:u,id:o.id,type:o.type})),p>a+1&&qt.push({xStart:a,yStart:i,xEnd:p-1,yEnd:i+o.width-1,color:h,id:o.id,type:o.type})):(p=n-Math.round(r.start*(n-t+1)/c),s&&p>n-8&&(f=n-Math.round((r.end+1)*(n-t+1)/c)-1,u=ae(o,r.type),qt.push({xStart:f,yStart:i,xEnd:p,yEnd:i+o.width-1,color:u,id:o.id,type:o.type})),a>p+1&&qt.push({xStart:p+1,yStart:i,xEnd:a,yEnd:i+o.width-1,color:h,id:o.id,type:o.type})),a=p,l=r.type),(r.end<c-1||!r.hasOwnProperty("continue"))&&(h=ae(o,l),!0===e.isForward?(f=t+Math.round((r.end+1)*(n-t+1)/c)-1,qt.push({xStart:a,yStart:i,xEnd:f,yEnd:i+o.width-1,color:h,id:o.id,type:o.type})):(f=n-Math.round((r.end+1)*(n-t+1)/c)-1,qt.push({xStart:f,yStart:i,xEnd:a,yEnd:i+o.width-1,color:h,id:o.id,type:o.type})),a=f+1,l="plain")}),{xStart:a,highlight:l}}function he(e,t,n,r,o,a,i,d){e+=10*wt[i];var s=Math.min(t,n),c=Math.max(t,n);St.push({xStart:e-10*wt[i],yStart:t,xEnd:e+5,yEnd:t+r-1,color:o,id:a,type:d}),St.push({xStart:e+5+7,yStart:s+r+7-1,xEnd:e+5+7+Math.min(7,r)-1,yEnd:c-7+1,color:o,id:a,type:d}),St.push({xStart:e-10*wt[i],yStart:n,xEnd:e+5,yEnd:n+r-1,color:o,id:a,type:d});var l="M "+(e+5)+" "+c;l+=" Q "+(e+5+7)+" "+c+" "+(e+5+7)+" "+(c-7),l+=" H "+(e+5+7+Math.min(7,r)),l+=" Q "+(e+5+7+Math.min(7,r))+" "+(c+r)+" "+(e+5)+" "+(c+r),l+=" Z ",kt.push({path:l,color:o,id:a,type:d}),l="M "+(e+5)+" "+s,l+=" Q "+(e+5+7+Math.min(7,r))+" "+s+" "+(e+5+7+Math.min(7,r))+" "+(s+r+7),l+=" H "+(e+5+7),l+=" Q "+(e+5+7)+" "+(s+r)+" "+(e+5)+" "+(s+r),l+=" Z ",kt.push({path:l,color:o,id:a,type:d}),wt[i]+=1}function ue(e,t,n,r,o,a,i,d){var s=Math.min(t,n),c=Math.max(t,n);e-=10*vt[i],St.push({xStart:e-6,yStart:t,xEnd:e+10*vt[i],yEnd:t+r-1,color:o,id:a,type:d}),St.push({xStart:e-5-7-Math.min(7,r),yStart:s+r+7-1,xEnd:e-5-7-1,yEnd:c-7+1,color:o,id:a,type:d}),St.push({xStart:e-6,yStart:n,xEnd:e+10*vt[i],yEnd:n+r-1,color:o,id:a,type:d});var l="M "+(e-5)+" "+c;l+=" Q "+(e-5-7)+" "+c+" "+(e-5-7)+" "+(c-7),l+=" H "+(e-5-7-Math.min(7,r)),l+=" Q "+(e-5-7-Math.min(7,r))+" "+(c+r)+" "+(e-5)+" "+(c+r),l+=" Z ",kt.push({path:l,color:o,id:a,type:d}),l="M "+(e-5)+" "+s,l+=" Q "+(e-5-7-Math.min(7,r))+" "+s+" "+(e-5-7-Math.min(7,r))+" "+(s+r+7),l+=" H "+(e-5-7),l+=" Q "+(e-5-7)+" "+(s+r)+" "+(e-5)+" "+(s+r),l+=" Z ",kt.push({path:l,color:o,id:a,type:d}),vt[i]+=1}function pe(e,t,n){void 0===n&&(n="haplo");var r=new Set;t.forEach(function(e){r.add(e.color)}),r.forEach(function(r){we(t.filter(ve("color",r)),n),Fe(e.filter(ve("color",r)),n)})}function fe(e){var t=void 0,n=void 0;e.forEach(function(e){e.d="M "+(e.x-9)+" "+e.y+" Q "+(e.x-9)+" "+(e.y-9)+" "+e.x+" "+(e.y-9),t=e.x,n=e.y-9,e.width>1&&(t+=e.pixelWidth,e.d+=" L "+t+" "+n),e.d+=" Q "+(t+9)+" "+n+" "+(t+9)+" "+(n+9),t+=9,n+=9,e.contentHeight>0&&(n+=e.contentHeight-0,e.d+=" L "+t+" "+n),e.d+=" Q "+t+" "+(n+9)+" "+(t-9)+" "+(n+9),t-=9,n+=9,e.width>1&&(t-=e.pixelWidth,e.d+=" L "+t+" "+n),e.d+=" Q "+(t-9)+" "+n+" "+(t-9)+" "+(n-9),t-=9,n-=9,e.contentHeight>0&&(n-=e.contentHeight-0,e.d+=" L "+t+" "+n)}),at.selectAll(".node").data(e).enter().append("path").attr("id",function(e){return e.name}).attr("d",function(e){return e.d}).on("mouseover",qe).on("mouseout",Oe).on("dblclick",Ce).style("fill","#fff").style("fill-opacity",Et.showExonsFlag?"0.4":"0.6").style("stroke","black").style("stroke-width","2px").append("svg:title").text(function(e){return e.name})}function ge(e){0===Et.nodeWidthOption&&at.selectAll("text").data(e).enter().append("text").attr("x",function(e){return e.x-4}).attr("y",function(e){return e.y+4}).text(function(e){return e.seq}).attr("font-family",'Courier, "Lucida Console", monospace').attr("font-size","14px").attr("fill","black").style("pointer-events","none")}function me(){for(var e=0;ht[e].name!==Ct;)e+=1;var t=ht[e];at.append("line").attr("x1",0).attr("y1",Ot-10).attr("x2",It).attr("y2",Ot-10).attr("stroke-width",1).attr("stroke","black");var n=100;0===Et.nodeWidthOption&&(n=20);var r=t.indexOfFirstBase,o=!1,a=-100;if(0!==Et.nodeWidthOption){var i=lt[t.indexSequence[0]];a=se(i,0),ye(r,a),o=!0}t.indexSequence.forEach(function(e){for(var t=lt[e],i=Math.ceil(r/n)*n;i<r+t.sequenceLength;){var d=se(t,i-r);a+80<=d&&(ye(i,d),o=!0,a=d),i+=n}r+=lt[e].sequenceLength}),o||ye(t.indexOfFirstBase,lt[t.indexSequence[0]].x-4)}function ye(e,t){at.append("text").attr("x",t).attr("y",Ot-13).text("|"+e).attr("font-family",'Courier, "Lucida Console", monospace').attr("font-size","12px").attr("fill","black").style("pointer-events","none")}function ve(e,t){return function(n){return n[e]===t}}function we(e,t){void 0===t&&(t="haplo"),e=e.filter(ve("type",t)),at.selectAll("trackRectangles").data(e).enter().append("rect").attr("x",function(e){return e.xStart}).attr("y",function(e){return e.yStart}).attr("width",function(e){return e.xEnd-e.xStart+1}).attr("height",function(e){return e.yEnd-e.yStart+1}).style("fill",function(e){return e.color}).attr("trackID",function(e){return e.id}).attr("class",function(e){return"track"+e.id}).attr("color",function(e){return e.color}).on("mouseover",Se).on("mouseout",Ne).on("dblclick",Ie)}function xe(e,t){return e[6]<t[6]?-1:e[6]>t[6]?1:0}function Ee(){var e=at.append("defs"),t=e.append("pattern").attrs({id:"patternA",width:"7",height:"7",patternUnits:"userSpaceOnUse",patternTransform:"rotate(45)"});t.append("rect").attrs({x:"0",y:"0",width:"7",height:"7",fill:"#FFFFFF"}),t.append("rect").attrs({x:"0",y:"0",width:"3",height:"3",fill:"#505050"}),t.append("rect").attrs({x:"0",y:"4",width:"3",height:"3",fill:"#505050"}),t.append("rect").attrs({x:"4",y:"0",width:"3",height:"3",fill:"#505050"}),t.append("rect").attrs({x:"4",y:"4",width:"3",height:"3",fill:"#505050"}),t=e.append("pattern").attrs({id:"patternB",width:"8",height:"8",patternUnits:"userSpaceOnUse",patternTransform:"rotate(45)"}),t.append("rect").attrs({x:"0",y:"0",width:"8",height:"8",fill:"#FFFFFF"}),t.append("rect").attrs({x:"0",y:"0",width:"3",height:"3",fill:"#1f77b4"}),t.append("rect").attrs({x:"0",y:"5",width:"3",height:"3",fill:"#1f77b4"}),t.append("rect").attrs({x:"5",y:"0",width:"3",height:"3",fill:"#1f77b4"}),t.append("rect").attrs({x:"5",y:"5",width:"3",height:"3",fill:"#1f77b4"}),t=e.append("pattern").attrs({id:"plaid0",width:"6",height:"6",patternUnits:"userSpaceOnUse",patternTransform:"rotate(45)"}),t.append("rect").attrs({x:"0",y:"0",width:"6",height:"6",fill:"#FFFFFF"}),t.append("rect").attrs({x:"0",y:"0",width:"2",height:"2",fill:"#1f77b4"}),t.append("rect").attrs({x:"0",y:"4",width:"2",height:"2",fill:"#1f77b4"}),t.append("rect").attrs({x:"4",y:"0",width:"2",height:"2",fill:"#1f77b4"}),t.append("rect").attrs({x:"4",y:"4",width:"2",height:"2",fill:"#1f77b4"}),t=e.append("pattern").attrs({id:"plaid1",width:"6",height:"6",patternUnits:"userSpaceOnUse",patternTransform:"rotate(45)"}),t.append("rect").attrs({x:"0",y:"0",width:"6",height:"6",fill:"#FFFFFF"}),t.append("rect").attrs({x:"0",y:"0",width:"2",height:"2",fill:"#ff7f0e"}),t.append("rect").attrs({x:"0",y:"4",width:"2",height:"2",fill:"#ff7f0e"}),t.append("rect").attrs({x:"4",y:"0",width:"2",height:"2",fill:"#ff7f0e"}),t.append("rect").attrs({x:"4",y:"4",width:"2",height:"2",fill:"#ff7f0e"}),t=e.append("pattern").attrs({id:"plaid2",width:"6",height:"6",patternUnits:"userSpaceOnUse",patternTransform:"rotate(45)"}),t.append("rect").attrs({x:"0",y:"0",width:"6",height:"6",fill:"#FFFFFF"}),t.append("rect").attrs({x:"0",y:"0",width:"2",height:"2",fill:"#2ca02c"}),t.append("rect").attrs({x:"0",y:"4",width:"2",height:"2",fill:"#2ca02c"}),t.append("rect").attrs({x:"4",y:"0",width:"2",height:"2",fill:"#2ca02c"}),t.append("rect").attrs({x:"4",y:"4",width:"2",height:"2",fill:"#2ca02c"}),t=e.append("pattern").attrs({id:"plaid3",width:"6",height:"6",patternUnits:"userSpaceOnUse",patternTransform:"rotate(45)"}),t.append("rect").attrs({x:"0",y:"0",width:"6",height:"6",fill:"#FFFFFF"}),t.append("rect").attrs({x:"0",y:"0",width:"2",height:"2",fill:"#d62728"}),t.append("rect").attrs({x:"0",y:"4",width:"2",height:"2",fill:"#d62728"}),t.append("rect").attrs({x:"4",y:"0",width:"2",height:"2",fill:"#d62728"}),t.append("rect").attrs({x:"4",y:"4",width:"2",height:"2",fill:"#d62728"}),t=e.append("pattern").attrs({id:"plaid4",width:"6",height:"6",patternUnits:"userSpaceOnUse",patternTransform:"rotate(45)"}),t.append("rect").attrs({x:"0",y:"0",width:"6",height:"6",fill:"#FFFFFF"}),t.append("rect").attrs({x:"0",y:"0",width:"2",height:"2",fill:"#9467bd"}),t.append("rect").attrs({x:"0",y:"4",width:"2",height:"2",fill:"#9467bd"}),t.append("rect").attrs({x:"4",y:"0",width:"2",height:"2",fill:"#9467bd"}),t.append("rect").attrs({x:"4",y:"4",width:"2",height:"2",fill:"#9467bd"}),t=e.append("pattern").attrs({id:"plaid5",width:"6",height:"6",patternUnits:"userSpaceOnUse",patternTransform:"rotate(45)"}),t.append("rect").attrs({x:"0",y:"0",width:"6",height:"6",fill:"#FFFFFF"}),t.append("rect").attrs({x:"0",y:"0",width:"2",height:"2",fill:"#8c564b"}),t.append("rect").attrs({x:"0",y:"4",width:"2",height:"2",fill:"#8c564b"}),t.append("rect").attrs({x:"4",y:"0",width:"2",height:"2",fill:"#8c564b"}),t.append("rect").attrs({x:"4",y:"4",width:"2",height:"2",fill:"#8c564b"})}function be(e){void 0===e&&(e="haplo");var t=Ft.filter(ve("type",e));t.sort(xe),t.forEach(function(e){var t=(e.xStart+e.xEnd)/2,n="M "+e.xStart+" "+e.yStart;n+=" C "+t+" "+e.yStart+" "+t+" "+e.yEnd+" "+e.xEnd+" "+e.yEnd,n+=" V "+(e.yEnd+e.width),n+=" C "+t+" "+(e.yEnd+e.width)+" "+t+" "+(e.yStart+e.width)+" "+e.xStart+" "+(e.yStart+e.width),n+=" Z",e.path=n}),at.selectAll("trackCurves").data(Ft).enter().append("path").attr("d",function(e){return e.path}).style("fill",function(e){return e.color}).attr("trackID",function(e){return e.id}).attr("class",function(e){return"track"+e.id}).attr("color",function(e){return e.color}).on("mouseover",Se).on("mouseout",Ne).on("dblclick",Ie)}function Fe(e,t){void 0===t&&(t="haplo"),e=e.filter(ve("type",t)),at.selectAll("trackCorners").data(e).enter().append("path").attr("d",function(e){return e.path}).style("fill",function(e){return e.color}).attr("trackID",function(e){return e.id}).attr("class",function(e){return"track"+e.id}).attr("color",function(e){return e.color}).on("mouseover",Se).on("mouseout",Ne).on("dblclick",Ie)}function ke(){for(var e='<table class="table-sm table-condensed table-nonfluid"><thead><tr><th>Color</th><th>Trackname</th><th>Show Track</th></tr></thead>',t=[],n=0;n<ht.length;n+=1)"haplo"===ht[n].type&&(e+='<tr><td style="text-align:right"><div class="color-box" style="background-color: '+ae(ht[n],"exon")+';"></div></td>',ht[n].hasOwnProperty("name")?e+="<td>"+ht[n].name+"</td>":e+="<td>"+ht[n].id+"</td>",e+='<td><input type="checkbox" checked=true id="showTrack'+n+'"></td>',t.push(n));e+="</table",$("#legendDiv").html(e),t.forEach(function(e){document.getElementById("showTrack"+e).addEventListener("click",function(){return i(e)},!1)})}function Se(){var e=d3.select(this).attr("trackID");d3.selectAll(".track"+e).style("fill","url(#patternA)")}function qe(){d3.select(this).style("stroke-width","4px")}function Ne(){var e=d3.select(this).attr("trackID");d3.selectAll(".track"+e).each(function(){var e=d3.select(this).attr("color");d3.select(this).style("fill",e)})}function Oe(){d3.select(this).style("stroke-width","2px")}function Ie(){for(var e=d3.select(this).attr("trackID"),t=0;t<st.length&&st[t].id!==Number(e);)t+=1;t>=st.length||(console.log("moving index: "+t),o(t),p())}function Ce(){var e=d3.select(this).attr("id");Et.clickableNodesFlag&&(ut&&Et.showReads?(document.getElementById("hgvmNodeID").value=e,document.getElementById("hgvmPostButton").click()):(document.getElementById("nodeID").value=e,document.getElementById("postButton").click()))}function Me(e){var t=[];return e.node.forEach(function(e){t.push({name:""+e.id,sequenceLength:e.sequence.length,seq:e.sequence})}),t}function Le(){switch(lt.forEach(function(e){e.hasOwnProperty("sequenceLength")||(e.sequenceLength=e.seq.length)}),Et.nodeWidthOption){case 1:lt.forEach(function(e){e.width=1+Math.log(e.sequenceLength)/Math.log(2),e.pixelWidth=Math.round(8.401*(e.width-1))});break;case 2:lt.forEach(function(e){e.width=e.sequenceLength/100,e.pixelWidth=Math.round(8.401*(e.width-1))});break;default:lt.forEach(function(e){e.width=e.sequenceLength,at.append("text").attr("x",0).attr("y",100).attr("id","dummytext").text(e.seq.substr(1)).attr("font-family",'Courier, "Lucida Console", monospace').attr("font-size","14px").attr("fill","black").style("pointer-events","none"),e.pixelWidth=Math.round(document.getElementById("dummytext").getComputedTextLength()),$("#dummytext").remove()})}}function Be(e){var t=[];return e.path.forEach(function(e,n){var r=[],o=!0;e.mapping.forEach(function(e){e.position.hasOwnProperty("is_reverse")&&!0===e.position.is_reverse?r.push("-"+e.position.node_id):(r.push(""+e.position.node_id),o=!1)}),o&&(r.reverse(),r.forEach(function(e,t){r[t]=e.substr(1)}));var a={};a.id=n,a.sequence=r,e.hasOwnProperty("freq")&&(a.freq=e.freq),e.hasOwnProperty("name")&&(a.name=e.name),e.hasOwnProperty("indexOfFirstBase")&&(a.indexOfFirstBase=Number(e.indexOfFirstBase)),t.push(a)}),t}function Pe(e,t,n){console.log(n);var r=[],o=[];e.forEach(function(e){o.push(e.name,10)});for(var a=0;a<n.length;a+=1)!function(e){var a=n[e],i=[],d=[],s=-1,c=-1;if(a.path.mapping.forEach(function(t,n){if(o.indexOf(t.position.node_id)>-1){var r={},a=0;t.position.hasOwnProperty("is_reverse")&&!0===t.position.is_reverse?(i.push("-"+t.position.node_id),r.nodeName="-"+t.position.node_id):(i.push(""+t.position.node_id),r.nodeName=t.position.node_id.toString()),s<0&&(s=n,t.position.hasOwnProperty("offset")&&(t.position.offset=parseInt(t.position.offset,10),a=t.position.offset)),c=n;var l=[],h=a;t.edit.forEach(function(r){r.hasOwnProperty("to_length")&&!r.hasOwnProperty("from_length")?l.push({type:"insertion",pos:h,seq:r.sequence}):!r.hasOwnProperty("to_length")&&r.hasOwnProperty("from_length")?l.push({type:"deletion",pos:h,length:r.from_length}):r.hasOwnProperty("sequence")&&(r.sequence.length>1&&console.log("found substitution at read "+e+", node "+n+" = "+t.position.node_id+", seq = "+r.sequence),l.push({type:"substitution",pos:h,seq:r.sequence})),r.hasOwnProperty("from_length")&&(h+=r.from_length)}),r.mismatches=l,d.push(r)}}),0===i.length)console.log("read "+e+" is empty");else{var l={};l.id=t.length+r.length,l.sequence=i,l.sequenceNew=d,l.type="read",a.path.hasOwnProperty("freq")&&(l.freq=a.path.freq),a.path.hasOwnProperty("name")&&(l.name=a.path.name),l.firstNodeOffset=0,a.path.mapping[s].position.hasOwnProperty("offset")&&(l.firstNodeOffset=a.path.mapping[s].position.offset);var h=a.path.mapping[c].edit;l.finalNodeCoverLength=0,a.path.mapping[c].position.hasOwnProperty("offset")&&(l.finalNodeCoverLength+=a.path.mapping[c].position.offset),h.forEach(function(e){e.hasOwnProperty("from_length")&&(l.finalNodeCoverLength+=e.from_length)}),r.push(l)}}(a);return r}function De(){for(var e=void 0,t=void 0,n=[],r=[],o=0;o<lt.length;o+=1)n.push(new Set),r.push(new Set);var a=void 0;a=ut&&Et.showReads?ht.concat(ut):ht,a.forEach(function(o){for(var a=0;a<o.sequence.length;a+=1)"-"!==o.sequence[a].charAt(0)?(a>0?(e=o.sequence[a-1],n[gt.get(o.sequence[a])].add(e),"-"===e.charAt(0)&&n[gt.get(o.sequence[a])].add(e.substr(1))):"haplo"===o.type&&n[gt.get(o.sequence[a])].add("None"),a<o.sequence.length-1?(e=o.sequence[a+1],r[gt.get(o.sequence[a])].add(e),"-"===e.charAt(0)&&r[gt.get(o.sequence[a])].add(e.substr(1))):"haplo"===o.type&&r[gt.get(o.sequence[a])].add("None")):(e=o.sequence[a].substr(1),a>0?(t=o.sequence[a-1],"-"===t.charAt(0)?r[gt.get(e)].add(t.substr(1)):(r[gt.get(e)].add(t),r[gt.get(e)].add("-"+t))):"haplo"===o.type&&r[gt.get(e)].add("None"),a<o.sequence.length-1?(t=o.sequence[a+1],"-"===t.charAt(0)?n[gt.get(e)].add(t.substr(1)):(n[gt.get(e)].add(t),n[gt.get(e)].add("-"+t))):"haplo"===o.type&&n[gt.get(e)].add("None"))});for(var i=0;i<lt.length;i+=1)r[i]=Array.from(r[i]),n[i]=Array.from(n[i]);if(ut&&Et.showReads){var d=lt.slice();d.sort(K);var s=new Map,c=new Map;d.forEach(function(e){var t=Re(gt.get(e.name),n,r);t?(s.set(e.name,s.get(t)+lt[gt.get(t)].sequenceLength),c.set(e.name,c.get(t))):(s.set(e.name,0),c.set(e.name,e.name))}),ut.forEach(function(e){e.firstNodeOffset+=s.get(e.sequence[0]),e.finalNodeCoverLength+=s.get(e.sequence[e.sequence.length-1]);for(var t=e.sequence.length-1;t>=0;t-=1)Re(gt.get(e.sequence[t]),n,r)&&function(){var o=Re(gt.get(e.sequence[t]),n,r);Ae(gt.get(o),n,r)&&(t>0?(e.sequence.splice(t,1),e.sequenceNew[t].mismatches.forEach(function(e){e.pos+=lt[gt.get(o)].sequenceLength}),e.sequenceNew[t-1].mismatches=e.sequenceNew[t-1].mismatches.concat(e.sequenceNew[t].mismatches),e.sequenceNew.splice(t,1)):(e.sequence[0]=c.get(e.sequence[0]),e.sequenceNew[t].mismatches.forEach(function(t){t.pos+=s.get(e.sequenceNew[0].nodeName)}),e.sequenceNew[0].nodeName=c.get(e.sequenceNew[0].nodeName)))}()})}for(var l=0;l<lt.length;l+=1)if(Ae(l,n,r)&&!Re(l,n,r))for(var h=l;Ae(h,n,r);)h=r[h][0],"-"===h.charAt(0)&&(h=h.substr(1)),h=gt.get(h),lt[l].hasOwnProperty("sequenceLength")?lt[l].sequenceLength+=lt[h].sequenceLength:lt[l].width+=lt[h].width,lt[l].seq+=lt[h].seq;ht.forEach(function(t){for(var o=t.sequence.length-1;o>=0;o-=1){e=t.sequence[o],"-"===e.charAt(0)&&(e=e.substr(1));Re(gt.get(e),n,r)&&t.sequence.splice(o,1)}});for(var u=lt.length-1;u>=0;u-=1)Re(u,n,r)&&lt.splice(u,1)}function Re(e,t,n){if(1!==t[e].length)return!1;if("None"===t[e][0])return!1;var r=t[e][0];"-"===r.charAt(0)&&(r=r.substr(1));var o=gt.get(r);return 1===n[o].length&&("None"!==n[o][0]&&r)}function Ae(e,t,n){if(1!==n[e].length)return!1;if("None"===n[e][0])return!1;var r=n[e][0];"-"===r.charAt(0)&&(r=r.substr(1));var o=gt.get(r);return 1===t[o].length&&"None"!==t[o][0]}function Te(){ht.forEach(function(e,t){"read"===e.type&&e.sequenceNew.forEach(function(t,n){t.mismatches.forEach(function(r){for(var o=gt.get(t.nodeName),a=lt[o],i=se(a,r.pos),d=n;e.path[d].node!==o;)d+=1;var s=e.path[d].y;if("insertion"===r.type)!Et.showSoftClips&&(r.pos===e.firstNodeOffset&&0===n||r.pos===e.finalNodeCoverLength&&n===e.sequenceNew.length-1)||He(i-3,s+7,r.seq,a.y);else if("deletion"===r.type){var c=se(a,r.pos+r.length);_e(i,c,s+4,a.y)}else if("substitution"===r.type){var l=se(a,r.pos+r.seq.length);$e(i+1,l,s+7,a.y,r.seq)}})})})}function He(e,t,n,r){at.append("text").attr("x",e).attr("y",t).text("*").attr("font-family",'Courier, "Lucida Console", monospace').attr("font-size","12px").attr("fill","black").attr("nodeY",r).on("mouseover",Ue).on("mouseout",ze).append("svg:title").text(n)}function $e(e,t,n,r,o){at.append("text").attr("x",e).attr("y",n).text(o).attr("font-family",'Courier, "Lucida Console", monospace').attr("font-size","12px").attr("fill","black").attr("nodeY",r).attr("rightX",t).on("mouseover",je).on("mouseout",Qe)}function _e(e,t,n,r){at.append("line").attr("x1",e).attr("y1",n-1).attr("x2",t).attr("y2",n-1).attr("stroke-width",7).attr("stroke","grey").attr("nodeY",r).on("mouseover",We).on("mouseout",Ye)}function Ue(){d3.select(this).attr("fill","red");var e=Number(d3.select(this).attr("x")),t=Number(d3.select(this).attr("y")),n=Number(d3.select(this).attr("nodeY"));at.append("line").attr("class","insertionHighlight").attr("x1",e+4).attr("y1",t-10).attr("x2",e+4).attr("y2",n+5).attr("stroke-width",1).attr("stroke","black")}function We(){d3.select(this).attr("stroke","red");var e=Number(d3.select(this).attr("x1")),t=Number(d3.select(this).attr("x2")),n=Number(d3.select(this).attr("y1")),r=Number(d3.select(this).attr("nodeY"));at.append("line").attr("class","deletionHighlight").attr("x1",e).attr("y1",n-3).attr("x2",e).attr("y2",r+5).attr("stroke-width",1).attr("stroke","black"),at.append("line").attr("class","deletionHighlight").attr("x1",t).attr("y1",n-3).attr("x2",t).attr("y2",r+5).attr("stroke-width",1).attr("stroke","black")}function je(){d3.select(this).attr("fill","red");var e=Number(d3.select(this).attr("x")),t=Number(d3.select(this).attr("rightX")),n=Number(d3.select(this).attr("y")),r=Number(d3.select(this).attr("nodeY"));at.append("line").attr("class","substitutionHighlight").attr("x1",e-1).attr("y1",n-7).attr("x2",e-1).attr("y2",r+5).attr("stroke-width",1).attr("stroke","black"),at.append("line").attr("class","substitutionHighlight").attr("x1",t+1).attr("y1",n-7).attr("x2",t+1).attr("y2",r+5).attr("stroke-width",1).attr("stroke","black")}function ze(){d3.select(this).attr("fill","black"),d3.selectAll(".insertionHighlight").remove()}function Ye(){d3.select(this).attr("stroke","grey"),d3.selectAll(".deletionHighlight").remove()}function Qe(){d3.select(this).attr("fill","black"),d3.selectAll(".substitutionHighlight").remove()}Object.defineProperty(n,"__esModule",{value:!0}),n.create=r,n.changeTrackVisibility=i,n.changeExonVisibility=d,n.setMergeNodesFlag=s,n.setSoftClipsFlag=c,n.setShowReadsFlag=l,n.setColorSet=h,n.setNodeWidthOption=u,n.zoomBy=C,n.useColorScheme=ne,n.vgExtractNodes=Me,n.vgExtractTracks=Be,n.vgExtractReads=Pe;var Je=!1,Ve=["#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],Xe=["#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],Ge=["#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],Ze=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],Ke=["#ABCCE3","#FFCFA5","#B0DBB0","#F0AEAE","#D7C6E6","#C6ABA5","#F4CCE8","#CFCFCF","#E6E6AC","#A8E7ED"],et=[],tt=[],nt=[],rt=[],ot=void 0,at=void 0,it=n.zoom=void 0,dt=[],st=[],ct=[],lt=void 0,ht=void 0,ut=void 0,pt=void 0,ft=void 0,gt=void 0,mt=void 0,yt=[],vt=[],wt=[],xt=void 0,Et={mergeNodesFlag:!0,clickableNodesFlag:!1,showExonsFlag:!1,colorScheme:0,nodeWidthOption:0,showReads:!0,showSoftClips:!0,haplotypeColors:"greys",forwardReadColors:"reds",reverseReadColors:"blues",exonColors:"lightColors",hideLegendFlag:!1},bt=[],Ft=[],kt=[],St=[],qt=[],Nt=0,Ot=0,It=0,Ct=void 0,Mt=void 0},{}],3:[function(e,t,n){t.exports={BACKEND_URL:!1,DATA_SOURCES:[{name:"snp1kg-BRCA1",xgFile:"snp1kg-BRCA1.vg.xg",gamFile:"NA12878-BRCA1.sorted.gam",anchorTrackName:"17",useMountedPath:!1,defaultPosition:"1"},{name:"cactus",xgFile:"cactus.vg.xg",gamFile:"cactus-NA12879.sorted.gam",anchorTrackName:"ref",useMountedPath:!1,defaultPosition:"1"},{name:'vg "small" example',xgFile:"x.vg.xg",gbwtFile:"x.vg.gbwt",anchorTrackName:"x",useMountedPath:!1,defaultPosition:"1"}]}},{}],4:[function(e,t,n){t.exports={BACKEND_URL:"https://api.wbeyer.com"}},{}],5:[function(e,t,n){var r={}.constructor,o=function(e){return!(!e||e.constructor!==r)};n.isJSON=o;var a=function(e,t){var n=null;if(o(t)){if(n={},o(e))for(var r in e)n[r]=e[r];for(var r in t)"object"==typeof n[r]&&"object"==typeof t?n[r]=a(n[r],t[r]):n[r]=t[r]}else if(Array.isArray(e)&&Array.isArray(t)){n=e;for(var i=0;i<t.length;i++)-1===n.indexOf(t[i])&&(n[n.length]=t[i])}else n=t;return n};n.merge=a},{}]},{},[1]);
//# sourceMappingURL=main.js.map
